{
  "tables": [
    {
      "slug": "vendors",
      "name": "Vendors",
      "icon": "Store",
      "fields": [
        {
          "slug": "name",
          "name": "Name",
          "field_type": "text",
          "required": true
        },
        {
          "slug": "email",
          "name": "Email",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "address",
          "name": "Address",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "image_url",
          "name": "Image URL",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "status",
          "name": "Status",
          "field_type": "select",
          "required": false,
          "validation": {
            "options": [
              "active",
              "inactive",
              "pending"
            ]
          }
        }
      ]
    },
    {
      "slug": "zones",
      "name": "Pick Zones",
      "icon": "MapPin",
      "fields": [
        {
          "slug": "slug",
          "name": "Slug",
          "field_type": "text",
          "required": true
        },
        {
          "slug": "name",
          "name": "Name",
          "field_type": "text",
          "required": true
        },
        {
          "slug": "sort_order",
          "name": "Pick sequence",
          "field_type": "number",
          "required": false
        },
        {
          "slug": "vendor_id",
          "name": "Vendor",
          "field_type": "relation",
          "required": false,
          "relation_table_slug": "vendors"
        }
      ]
    },
    {
      "slug": "categories",
      "name": "Categories",
      "icon": "Folder",
      "fields": [
        {
          "slug": "name",
          "name": "Name",
          "field_type": "text",
          "required": true
        },
        {
          "slug": "slug",
          "name": "Slug",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "zone_id",
          "name": "Pick zone",
          "field_type": "relation",
          "required": false,
          "relation_table_slug": "zones"
        }
      ]
    },
    {
      "slug": "products",
      "name": "Products",
      "icon": "Package",
      "fields": [
        {
          "slug": "name",
          "name": "Name",
          "field_type": "text",
          "required": true
        },
        {
          "slug": "description",
          "name": "Description",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "price",
          "name": "Price",
          "field_type": "currency",
          "required": false
        },
        {
          "slug": "sale_price",
          "name": "Sale Price",
          "field_type": "currency",
          "required": false
        },
        {
          "slug": "on_sale",
          "name": "On Sale",
          "field_type": "boolean",
          "required": false
        },
        {
          "slug": "sku",
          "name": "SKU",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "ean",
          "name": "EAN / Barcode",
          "field_type": "text",
          "required": false,
          "validation": {
            "pattern": "EAN-8, EAN-13, or UPC-A"
          }
        },
        {
          "slug": "sell_by_weight",
          "name": "Sell by weight",
          "field_type": "boolean",
          "required": false
        },
        {
          "slug": "unit",
          "name": "Unit",
          "field_type": "select",
          "required": false,
          "validation": {
            "options": [
              "kg",
              "lb",
              "g",
              "oz"
            ]
          }
        },
        {
          "slug": "price_per_unit",
          "name": "Price per unit",
          "field_type": "currency",
          "required": false
        },
        {
          "slug": "image_url",
          "name": "Image URL",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "stock_quantity",
          "name": "Stock",
          "field_type": "number",
          "required": false
        },
        {
          "slug": "subcategory",
          "name": "Subcategory",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "weight",
          "name": "Weight",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "storage_instructions",
          "name": "Storage Instructions",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "features",
          "name": "Features (JSON array)",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "tags",
          "name": "Tags (comma-separated)",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "category_id",
          "name": "Category",
          "field_type": "relation",
          "required": false,
          "relation_table_slug": "categories"
        },
        {
          "slug": "vendor_id",
          "name": "Vendor",
          "field_type": "relation",
          "required": false,
          "relation_table_slug": "vendors"
        }
      ]
    },
    {
      "slug": "promotions",
      "name": "Promotions",
      "icon": "Tag",
      "fields": [
        {
          "slug": "name",
          "name": "Name",
          "field_type": "text",
          "required": true
        },
        {
          "slug": "description",
          "name": "Description",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "discount_type",
          "name": "Discount Type",
          "field_type": "select",
          "required": false,
          "validation": {
            "options": [
              "percent",
              "fixed",
              "bogo"
            ]
          }
        },
        {
          "slug": "discount_value",
          "name": "Discount Value",
          "field_type": "number",
          "required": false
        },
        {
          "slug": "start_date",
          "name": "Start Date",
          "field_type": "date",
          "required": false
        },
        {
          "slug": "end_date",
          "name": "End Date",
          "field_type": "date",
          "required": false
        },
        {
          "slug": "min_order",
          "name": "Min Order (cents)",
          "field_type": "currency",
          "required": false
        },
        {
          "slug": "product_ids",
          "name": "Product IDs (JSON array)",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "vendor_id",
          "name": "Vendor",
          "field_type": "relation",
          "required": false,
          "relation_table_slug": "vendors"
        }
      ]
    },
    {
      "slug": "orders",
      "name": "Orders",
      "icon": "ShoppingCart",
      "fields": [
        {
          "slug": "user_id",
          "name": "User ID",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "customer_email",
          "name": "Customer email",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "status",
          "name": "Status",
          "field_type": "select",
          "required": false,
          "validation": {
            "options": [
              "pending",
              "paid",
              "shipped",
              "cancelled"
            ]
          }
        },
        {
          "slug": "total",
          "name": "Total",
          "field_type": "currency",
          "required": false
        },
        {
          "slug": "stripe_session_id",
          "name": "Stripe session",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "payment_status",
          "name": "Payment status",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "delivery_date",
          "name": "Delivery date",
          "field_type": "date",
          "required": false
        },
        {
          "slug": "delivery_slot",
          "name": "Delivery slot",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "shipping_address",
          "name": "Shipping address",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "delivery_notes",
          "name": "Delivery notes",
          "field_type": "text",
          "required": false
        }
      ]
    },
    {
      "slug": "order_items",
      "name": "Order Items",
      "icon": "List",
      "fields": [
        {
          "slug": "order_id",
          "name": "Order",
          "field_type": "relation",
          "required": false,
          "relation_table_slug": "orders"
        },
        {
          "slug": "product_id",
          "name": "Product",
          "field_type": "relation",
          "required": false,
          "relation_table_slug": "products"
        },
        {
          "slug": "quantity",
          "name": "Quantity",
          "field_type": "number",
          "required": false
        },
        {
          "slug": "price",
          "name": "Price",
          "field_type": "currency",
          "required": false
        },
        {
          "slug": "status",
          "name": "Status",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "out_of_stock",
          "name": "Out of stock",
          "field_type": "boolean",
          "required": false
        },
        {
          "slug": "substituted_product_id",
          "name": "Substituted product",
          "field_type": "relation",
          "required": false,
          "relation_table_slug": "products"
        },
        {
          "slug": "substitution_reason",
          "name": "Substitution reason",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "picked_at",
          "name": "Picked at",
          "field_type": "datetime",
          "required": false
        },
        {
          "slug": "picked_by",
          "name": "Picked by",
          "field_type": "text",
          "required": false
        }
      ]
    },
    {
      "slug": "product_substitutions",
      "name": "Product Substitutions",
      "icon": "List",
      "fields": [
        {
          "slug": "product_id",
          "name": "Original product",
          "field_type": "relation",
          "required": true,
          "relation_table_slug": "products"
        },
        {
          "slug": "substitute_product_id",
          "name": "Allowed substitute",
          "field_type": "relation",
          "required": true,
          "relation_table_slug": "products"
        }
      ]
    },
    {
      "slug": "addresses",
      "name": "Addresses",
      "icon": "MapPin",
      "fields": [
        {
          "slug": "user_id",
          "name": "User ID",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "type",
          "name": "Type",
          "field_type": "select",
          "required": false,
          "validation": {
            "options": [
              "shipping",
              "billing"
            ]
          }
        },
        {
          "slug": "line1",
          "name": "Address line 1",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "city",
          "name": "City",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "postal_code",
          "name": "Postal code",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "country",
          "name": "Country",
          "field_type": "text",
          "required": false
        },
        {
          "slug": "is_default",
          "name": "Default address",
          "field_type": "boolean",
          "required": false
        }
      ]
    }
  ],
  "reports": [
    {
      "name": "Orders by status",
      "description": "Count of orders grouped by status",
      "config": {
        "type": "table",
        "tableSlug": "orders",
        "groupBy": [
          "status"
        ],
        "aggregates": [
          {
            "field": "id",
            "fn": "count"
          }
        ],
        "sort": "status",
        "order": "asc",
        "limit": 50
      }
    },
    {
      "name": "Products low in stock",
      "description": "Products with stock below 10",
      "config": {
        "type": "sql",
        "sql": "SELECT name, sku, stock_quantity FROM products WHERE tenant_id = $tenant_id$ AND (stock_quantity IS NULL OR stock_quantity < 10) ORDER BY stock_quantity ASC NULLS LAST LIMIT 100"
      }
    },
    {
      "name": "Revenue by vendor",
      "description": "Total order value grouped by vendor",
      "config": {
        "type": "sql",
        "sql": "SELECT v.name AS vendor_name, COALESCE(SUM(oi.quantity * oi.price), 0)::numeric AS total_revenue\n          FROM order_items oi\n          JOIN orders o ON o.id = oi.order_id AND o.tenant_id = oi.tenant_id\n          JOIN products p ON p.id = oi.product_id AND p.tenant_id = oi.tenant_id\n          LEFT JOIN vendors v ON v.id = p.vendor_id AND v.tenant_id = p.tenant_id\n          WHERE oi.tenant_id = $tenant_id$ AND o.status = 'paid'\n          GROUP BY v.id, v.name\n          ORDER BY total_revenue DESC\n          LIMIT 50"
      }
    }
  ],
  "workflows": [
    {
      "name": "Send email on order.paid",
      "definition": {
        "nodes": [
          {
            "id": "trigger-1",
            "type": "trigger",
            "data": {
              "trigger_type": "event",
              "trigger_event_type": "order.paid"
            },
            "position": {
              "x": 0,
              "y": 0
            }
          },
          {
            "id": "email-1",
            "type": "email",
            "data": {
              "to_mode": "from_record",
              "to_field": "customer_email",
              "subject": "Order confirmed",
              "body": "Thank you for your order. Order ID: {{record.id}}"
            },
            "position": {
              "x": 240,
              "y": 0
            }
          }
        ],
        "edges": [
          {
            "id": "e1",
            "source": "trigger-1",
            "target": "email-1"
          }
        ]
      }
    },
    {
      "name": "Notify on inventory.low",
      "definition": {
        "nodes": [
          {
            "id": "trigger-1",
            "type": "trigger",
            "data": {
              "trigger_type": "event",
              "trigger_event_type": "inventory.low"
            },
            "position": {
              "x": 0,
              "y": 0
            }
          },
          {
            "id": "email-1",
            "type": "email",
            "data": {
              "to_mode": "users",
              "users_role_filter": "owner,admin",
              "subject": "Low stock alert",
              "body": "Product {{record.name}} ({{record.sku}}) is low in stock. Current: {{record.stock_quantity}}"
            },
            "position": {
              "x": 240,
              "y": 0
            }
          }
        ],
        "edges": [
          {
            "id": "e1",
            "source": "trigger-1",
            "target": "email-1"
          }
        ]
      }
    },
    {
      "name": "Process inbound orders webhook",
      "definition": {
        "nodes": [
          {
            "id": "trigger-1",
            "type": "trigger",
            "data": {
              "trigger_type": "webhook",
              "webhook_path": "orders"
            },
            "position": {
              "x": 0,
              "y": 0
            }
          },
          {
            "id": "email-1",
            "type": "email",
            "data": {
              "to_mode": "users",
              "users_role_filter": "owner,admin",
              "subject": "Inbound orders webhook received",
              "body": "An external system sent an orders webhook. Check workflow run logs for payload details."
            },
            "position": {
              "x": 240,
              "y": 0
            }
          }
        ],
        "edges": [
          {
            "id": "e1",
            "source": "trigger-1",
            "target": "email-1"
          }
        ]
      }
    },
    {
      "name": "Process inbound inventory webhook",
      "definition": {
        "nodes": [
          {
            "id": "trigger-1",
            "type": "trigger",
            "data": {
              "trigger_type": "webhook",
              "webhook_path": "inventory"
            },
            "position": {
              "x": 0,
              "y": 0
            }
          },
          {
            "id": "email-1",
            "type": "email",
            "data": {
              "to_mode": "users",
              "users_role_filter": "owner,admin",
              "subject": "Inbound inventory webhook received",
              "body": "An external system sent an inventory webhook. Check workflow run logs for payload details."
            },
            "position": {
              "x": 240,
              "y": 0
            }
          }
        ],
        "edges": [
          {
            "id": "e1",
            "source": "trigger-1",
            "target": "email-1"
          }
        ]
      }
    }
  ]
}